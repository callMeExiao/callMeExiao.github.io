import{_ as a,c as p,a as n,o as c}from"./app-pBrtxVLr.js";const e={};function l(o,s){return c(),p("div",null,[...s[0]||(s[0]=[n(`<p><strong>摘要</strong>：很多 Java 后端在接触前端时会困惑“React到底在干什么”“TypeScript（类型化 JavaScript）和 Java 类型到底像不像”。本文以项目中的 <code>DashboardIndex</code> 页面为主线，串起页面结构、状态管理、API（接口）封装与工程化配置，并用 Java 开发者熟悉的概念做对照，帮助你建立可迁移的前端心智模型。</p><hr><h2 id="_1-项目结构-用后端分层思维快速定位" tabindex="-1"><a class="header-anchor" href="#_1-项目结构-用后端分层思维快速定位"><span>1. 项目结构：用后端分层思维快速定位</span></a></h2><p>把前端目录当成“后端分层”来看，会更容易理解：</p><ul><li><code>src/pages</code>：页面入口，类似 Controller 的入口层</li><li><code>src/components</code>：通用组件库，类似公共模块/基础组件</li><li><code>src/store</code>：全局状态中心，类似应用级缓存/上下文</li><li><code>src/api</code>：请求封装层，类似 Feign/RestTemplate</li><li><code>src/lib</code>：拦截器/工具集，类似 Filter/AOP</li></ul><p><strong>主线页面：</strong> <code>src/pages/Dashboard/index.tsx</code><br> 它是“指挥平台”的首页入口，负责：</p><ul><li>页面类型设置</li><li>拉取今日上报数</li><li>组合多块业务组件</li></ul><h2 id="_2-从-dashboardindex-看-react-的-状态驱动-思想" tabindex="-1"><a class="header-anchor" href="#_2-从-dashboardindex-看-react-的-状态驱动-思想"><span>2. 从 DashboardIndex 看 React 的“状态驱动”思想</span></a></h2><p>在 <code>DashboardIndex</code> 中，React 组件是一个函数，它的职责是<strong>根据状态输出 UI（界面）</strong>。<br> 核心逻辑可以简化为（真实代码略）：</p><div class="language-tsx line-numbers-mode" data-ext="tsx" data-title="tsx"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span>useEffect(()</span><span class="space"> </span><span>=&gt;</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>dispatch(setPageType(PageType.dashboard));</span></span>
<span class="line"><span>},</span><span class="space"> </span><span>[]);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>useEffect(()</span><span class="space"> </span><span>=&gt;</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>if</span><span class="space"> </span><span>(currentArea?.code)</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>let</span><span class="space"> </span><span>cancelled</span><span class="space"> </span><span>=</span><span class="space"> </span><span>false;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>getTodayReportCountApi({region_code:</span><span class="space"> </span><span>currentArea.code})</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>.then((res)</span><span class="space"> </span><span>=&gt;</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>if</span><span class="space"> </span><span>(cancelled)</span><span class="space"> </span><span>return;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>const</span><span class="space"> </span><span>count</span><span class="space"> </span><span>=</span><span class="space"> </span><span>Number(res?.data?.[0]?.cnt</span><span class="space"> </span><span>??</span><span class="space"> </span><span>0);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>dispatch(setTodayReportCount(Number.isNaN(count)</span><span class="space"> </span><span>?</span><span class="space"> </span><span>0</span><span class="space"> </span><span>:</span><span class="space"> </span><span>count));</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>})</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>.catch(()</span><span class="space"> </span><span>=&gt;</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>if</span><span class="space"> </span><span>(cancelled)</span><span class="space"> </span><span>return;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>dispatch(setTodayReportCount(0));</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>});</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>return</span><span class="space"> </span><span>()</span><span class="space"> </span><span>=&gt;</span><span class="space"> </span><span>{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>cancelled</span><span class="space"> </span><span>=</span><span class="space"> </span><span>true;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>};</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>dispatch(setTodayReportCount(0));</span></span>
<span class="line"><span>},</span><span class="space"> </span><span>[currentArea]);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Java 视角对照：</strong></p><ul><li><code>useEffect</code>（副作用钩子）≈ 生命周期回调/监听器</li><li>依赖数组 <code>[currentArea]</code> ≈ “当某个状态变化时触发”</li><li><code>cancelled</code> 保护 ≈ “异步回调前先判断对象是否仍有效”</li></ul><p><strong>总结：</strong> React 的更新不是“手动刷新 UI”，而是“更新状态，让 UI 自动变化”。<br> 这和后端的“请求驱动”不同，更像“状态驱动渲染”。</p><h2 id="_3-typescript-像-java-但更灵活" tabindex="-1"><a class="header-anchor" href="#_3-typescript-像-java-但更灵活"><span>3. TypeScript：像 Java，但更灵活</span></a></h2><h3 id="_3-1-接口与类型别名" tabindex="-1"><a class="header-anchor" href="#_3-1-接口与类型别名"><span>3.1 接口与类型别名</span></a></h3><p>在 <code>src/types/dashboard.ts</code> 里：</p><div class="language-ts line-numbers-mode" data-ext="ts" data-title="ts"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">export</span><span class="space"> </span><span style="color:#C678DD;">interface</span><span class="space"> </span><span style="color:#E5C07B;">ProblemListReturnContext</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">statusKey</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">ProblemStatusKey</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">activeKey</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">string</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">eventType</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">string</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">returnId</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">string</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>对比 Java：</strong></p><ul><li>Java 的 <code>interface</code> 更偏“名义类型”</li><li>TypeScript 的 <code>interface/type</code> 更偏“结构化类型”</li></ul><h3 id="_3-2-可选属性与联合类型" tabindex="-1"><a class="header-anchor" href="#_3-2-可选属性与联合类型"><span>3.2 可选属性与联合类型</span></a></h3><p>在 <code>src/api/common.ts</code> 中常见：</p><div class="language-ts line-numbers-mode" data-ext="ts" data-title="ts"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E06C75;">region_code</span><span class="space"> </span><span style="color:#C678DD;">?</span><span class="space"> </span><span style="color:#C678DD;">:</span><span class="space"> </span><span style="color:#E06C75;">number</span><span class="space"> </span><span style="color:#56B6C2;">|</span><span class="space"> </span><span style="color:#E06C75;">string</span><span class="space"> </span><span style="color:#56B6C2;">|</span><span class="space"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Java 类比：</strong> 在 Java 中可能用 <code>Object</code> + 强制转换或 <code>Optional</code>，<br> TS 直接在类型层表达“可能是多种类型”，但也要求你更明确地处理空值。</p><h3 id="_3-3-类型断言的边界" tabindex="-1"><a class="header-anchor" href="#_3-3-类型断言的边界"><span>3.3 类型断言的边界</span></a></h3><p><code>common.ts</code> 中大量 <code>as unknown as Promise&lt;...&gt;</code>：</p><div class="language-ts line-numbers-mode" data-ext="ts" data-title="ts"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">return</span><span class="space"> </span><span style="color:#61AFEF;">getStatisticsApi</span><span style="color:#ABB2BF;">(...)</span><span class="space"> </span><span style="color:#C678DD;">as</span><span class="space"> </span><span style="color:#E5C07B;">unknown</span><span class="space"> </span><span style="color:#C678DD;">as</span><span class="space"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">&lt;{</span><span class="space"> </span><span style="color:#ABB2BF;">...</span><span class="space"> </span><span style="color:#ABB2BF;">}&gt;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>注意：</strong><br> 这类似 Java 的强制类型转换，但 TypeScript 的断言只在编译期生效，运行期不会帮你校验。<br> 建议只在“API 封装层”使用断言，业务代码尽量消费“已收敛的类型”。</p><h2 id="_4-redux-toolkit-状态管理工具-前端也有-状态中心" tabindex="-1"><a class="header-anchor" href="#_4-redux-toolkit-状态管理工具-前端也有-状态中心"><span>4. Redux Toolkit（状态管理工具）：前端也有“状态中心”</span></a></h2><p><code>src/store/slice/dashboardSlice.ts</code>：</p><div class="language-ts line-numbers-mode" data-ext="ts" data-title="ts"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">export</span><span class="space"> </span><span style="color:#C678DD;">const</span><span class="space"> </span><span style="color:#E5C07B;">dashboardSlice</span><span class="space"> </span><span style="color:#56B6C2;">=</span><span class="space"> </span><span style="color:#61AFEF;">createSlice</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#98C379;">&quot;dashboardSlice&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">initialState</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#ABB2BF;">{...},</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">reducers</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#61AFEF;">setTodayReportCount</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">state</span><span style="color:#ABB2BF;">,</span><span class="space"> </span><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;font-style:italic;">payload</span><span style="color:#ABB2BF;">})</span><span class="space"> </span><span style="color:#C678DD;">=&gt;</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">todayReportCount</span><span class="space"> </span><span style="color:#56B6C2;">=</span><span class="space"> </span><span style="color:#E06C75;">payload</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#61AFEF;">bumpEventListRefreshKey</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">state</span><span style="color:#ABB2BF;">)</span><span class="space"> </span><span style="color:#C678DD;">=&gt;</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">eventListRefreshKey</span><span class="space"> </span><span style="color:#56B6C2;">+=</span><span class="space"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Java 视角理解：</strong></p><ul><li><code>initialState</code> ≈ 初始化配置/默认上下文</li><li><code>reducers</code> ≈ 状态更新方法</li><li><code>dispatch(action)</code> ≈ 统一入口调用（类似 service 层更新状态）</li></ul><p>Redux Toolkit 内部使用 Immer（不可变数据助手），<br> 所以你看到的 <code>state.xxx =</code> 并不是“直接可变”，而是由库帮你生成新状态。</p><p><strong>实践建议：</strong></p><ul><li>页面级共享数据放 <code>store</code>（状态仓库），组件内部临时状态放 <code>useState</code></li><li>不要把所有数据都塞进全局，避免“全局状态膨胀”</li></ul><h2 id="_5-api-封装-把前端当成-远程服务调用层" tabindex="-1"><a class="header-anchor" href="#_5-api-封装-把前端当成-远程服务调用层"><span>5. API 封装：把前端当成“远程服务调用层”</span></a></h2><p><code>src/api/common.ts</code> 封装了通用表格查询接口：</p><div class="language-ts line-numbers-mode" data-ext="ts" data-title="ts"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">export</span><span class="space"> </span><span style="color:#C678DD;">function</span><span class="space"> </span><span style="color:#61AFEF;">getStatisticsApi</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">tableId</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">string</span><span style="color:#ABB2BF;">,</span><span class="space"> </span><span style="color:#E06C75;font-style:italic;">params</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">any</span><span style="color:#ABB2BF;">)</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">const</span><span class="space"> </span><span style="color:#E5C07B;">apiUrl</span><span class="space"> </span><span style="color:#56B6C2;">=</span><span class="space"> </span><span style="color:#98C379;">\`</span><span style="color:#C678DD;">\${</span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">appConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">backend</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">/v1.0/tables/</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">tableId</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">/data\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">return</span><span class="space"> </span><span style="color:#61AFEF;">axios</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E06C75;">apiUrl</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">method</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#98C379;">&quot;GET&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">params</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Java 类比：</strong></p><ul><li>类似 <code>RestTemplate</code> / <code>WebClient</code> 的封装</li><li>通过统一函数生成 URL、封装请求参数</li></ul><p>例如 <code>getTodayReportCountApi</code> 在此基础上封装字段：</p><div class="language-ts line-numbers-mode" data-ext="ts" data-title="ts"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">export</span><span class="space"> </span><span style="color:#C678DD;">function</span><span class="space"> </span><span style="color:#61AFEF;">getTodayReportCountApi</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">params</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">region_code</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">string</span><span class="space"> </span><span style="color:#ABB2BF;">|</span><span class="space"> </span><span style="color:#E5C07B;">number</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">category</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">string</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">const</span><span class="space"> </span><span style="color:#E5C07B;">requestParams</span><span class="space"> </span><span style="color:#56B6C2;">=</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">region_code</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">region_code</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">...(</span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">category</span><span class="space"> </span><span style="color:#C678DD;">?</span><span class="space"> </span><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">category</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">params</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">category</span><span style="color:#ABB2BF;">}</span><span class="space"> </span><span style="color:#C678DD;">:</span><span class="space"> </span><span style="color:#ABB2BF;">{}),</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">return</span><span class="space"> </span><span style="color:#61AFEF;">getStatisticsApi</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E5C07B;">TODAY_REPORT_COUNT_TABLE_ID</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">requestParams</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">)</span><span class="space"> </span><span style="color:#C678DD;">as</span><span class="space"> </span><span style="color:#E5C07B;">unknown</span><span class="space"> </span><span style="color:#C678DD;">as</span><span class="space"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">&lt;{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">success</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">boolean</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">code</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">number</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">string</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">TodayReportCountRow</span><span style="color:#ABB2BF;">[];</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">}&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>总结：</strong><br> 前端的 API 层同样需要“统一入口 + 统一返回结构”，否则业务代码会被散乱的请求逻辑污染。</p><h2 id="_6-axios-http-请求库-拦截器-前端的-拦截器-filter-interceptor" tabindex="-1"><a class="header-anchor" href="#_6-axios-http-请求库-拦截器-前端的-拦截器-filter-interceptor"><span>6. Axios（HTTP 请求库）拦截器：前端的“拦截器（Filter/Interceptor）”</span></a></h2><p><code>src/lib/request.ts</code> 中构建了统一请求实例：</p><div class="language-ts line-numbers-mode" data-ext="ts" data-title="ts"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span class="space"> </span><span style="color:#E5C07B;">service</span><span class="space"> </span><span style="color:#56B6C2;">=</span><span class="space"> </span><span style="color:#E5C07B;">axios</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">create</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E06C75;">timeout</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#D19A66;">300</span><span class="space"> </span><span style="color:#56B6C2;">*</span><span class="space"> </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请求拦截：</p><div class="language-ts line-numbers-mode" data-ext="ts" data-title="ts"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E5C07B;">service</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">interceptors</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">request</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">use</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">requestConfig</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">any</span><span style="color:#ABB2BF;">)</span><span class="space"> </span><span style="color:#C678DD;">=&gt;</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">const</span><span class="space"> </span><span style="color:#E5C07B;">appId</span><span class="space"> </span><span style="color:#56B6C2;">=</span><span class="space"> </span><span style="color:#98C379;">&quot;dashboard-app&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E5C07B;">requestConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">headers</span><span style="color:#ABB2BF;">[</span><span style="color:#98C379;">&quot;appid&quot;</span><span style="color:#ABB2BF;">]</span><span class="space"> </span><span style="color:#56B6C2;">=</span><span class="space"> </span><span style="color:#E06C75;">appId</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">const</span><span class="space"> </span><span style="color:#E5C07B;">token</span><span class="space"> </span><span style="color:#56B6C2;">=</span><span class="space"> </span><span style="color:#E5C07B;">User</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">access_token</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">if</span><span class="space"> </span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">token</span><span style="color:#ABB2BF;">)</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E5C07B;">requestConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">headers</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">Authorization</span><span class="space"> </span><span style="color:#56B6C2;">=</span><span class="space"> </span><span style="color:#98C379;">\`Bearer</span><span class="space"> </span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">token</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">\`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E5C07B;">store</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">dispatch</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">startLoading</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">return</span><span class="space"> </span><span style="color:#E06C75;">requestConfig</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">},</span><span class="space"> </span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>响应拦截：</p><div class="language-ts line-numbers-mode" data-ext="ts" data-title="ts"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E5C07B;">service</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">interceptors</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">response</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">use</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">response</span><span style="color:#ABB2BF;">:</span><span class="space"> </span><span style="color:#E5C07B;">any</span><span style="color:#ABB2BF;">)</span><span class="space"> </span><span style="color:#C678DD;">=&gt;</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E5C07B;">store</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">dispatch</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">endLoading</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">if</span><span class="space"> </span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">response</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">)</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">if</span><span class="space"> </span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">response</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span class="space"> </span><span style="color:#56B6C2;">&lt;</span><span class="space"> </span><span style="color:#D19A66;">200</span><span class="space"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span class="space"> </span><span style="color:#E5C07B;">response</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">status</span><span class="space"> </span><span style="color:#56B6C2;">&gt;=</span><span class="space"> </span><span style="color:#D19A66;">300</span><span style="color:#ABB2BF;">)</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">throw</span><span class="space"> </span><span style="color:#C678DD;">new</span><span class="space"> </span><span style="color:#61AFEF;">Error</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;执行异常&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">return</span><span class="space"> </span><span style="color:#E06C75;">response</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">...</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">if</span><span class="space"> </span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">success</span><span style="color:#ABB2BF;">)</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">if</span><span class="space"> </span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">)</span><span class="space"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#E5C07B;">message</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">error</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">throw</span><span class="space"> </span><span style="color:#E5C07B;">result</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">msg</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">...</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C678DD;">return</span><span class="space"> </span><span style="color:#E06C75;">result</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">},</span><span class="space"> </span><span style="color:#E06C75;">err</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Java 类比：</strong></p><ul><li>请求前注入 token（令牌）≈ 认证过滤器</li><li>错误统一提示 ≈ 全局异常处理</li><li>Loading（加载状态）统一管理 ≈ 请求链路统一埋点</li></ul><p>这套机制在前端非常关键，它保证了所有请求行为的一致性。</p><h2 id="_7-工程化配置-把-运行期配置-还给环境" tabindex="-1"><a class="header-anchor" href="#_7-工程化配置-把-运行期配置-还给环境"><span>7. 工程化配置：把“运行期配置”还给环境</span></a></h2><p>项目使用 <code>window.appConfig</code> 作为运行期配置来源：</p><div class="language-ts line-numbers-mode" data-ext="ts" data-title="ts"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span class="space"> </span><span style="color:#E5C07B;">apiUrl</span><span class="space"> </span><span style="color:#56B6C2;">=</span><span class="space"> </span><span style="color:#98C379;">\`</span><span style="color:#C678DD;">\${</span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">appConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">backend</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">/v1.0/tables/</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">tableId</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">/data\`</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在拦截器中也会使用 <code>window.appConfig.baseName</code> 处理登录跳转路径。<br> 这相当于后端的 <code>application.yml</code> + 环境变量：</p><ul><li>配置与代码解耦</li><li>不把真实地址写死进仓库</li></ul><p><strong>额外补充：</strong> 本项目在代码中大量使用 <code>@/</code> 作为路径别名，<br> 这是前端工程化常见实践，便于跨层级引用而不写复杂相对路径。</p><h2 id="_8-组件组合与样式组织-页面是-组合体" tabindex="-1"><a class="header-anchor" href="#_8-组件组合与样式组织-页面是-组合体"><span>8. 组件组合与样式组织：页面是“组合体”</span></a></h2><p><code>DashboardIndex</code> 页面并不复杂，但它是多个组件组合而成：</p><ul><li>顶部 <code>Header</code></li><li>中间 <code>Middle</code> 地图区域</li><li>左右侧业务面板</li><li>各类弹窗组件（如 <code>ReportModal</code>、<code>DutyCenter</code>）</li></ul><p>这相当于后端“组合多个服务模块输出一个完整业务页面”。<br> 样式方面，<code>index.module.less</code> 采用 CSS Modules（样式模块化），<br> 避免全局样式污染，类似“每个组件有自己的样式命名空间”。</p><h2 id="_9-java-工程师常见的前端坑-基于当前代码经验" tabindex="-1"><a class="header-anchor" href="#_9-java-工程师常见的前端坑-基于当前代码经验"><span>9. Java 工程师常见的前端坑（基于当前代码经验）</span></a></h2><ol><li><p><strong>异步请求返回晚于组件卸载</strong></p><ul><li>解决：像 <code>cancelled</code> 这样的保护必不可少</li></ul></li><li><p><strong><code>null/undefined</code> 处理不完整</strong></p><ul><li>解决：<code>res?.data?.[0]?.cnt ?? 0</code> 这种写法是必要的</li></ul></li><li><p><strong>类型过度宽松导致失控</strong></p><ul><li>解决：限制 <code>any</code> 使用范围，仅在 API 封装边界使用</li></ul></li><li><p><strong>依赖数组写错导致副作用重复执行</strong></p><ul><li>解决：明确 <code>useEffect</code> 的依赖来源</li></ul></li><li><p><strong>全局状态过度膨胀</strong></p><ul><li>解决：共享才进 <code>store</code>，局部状态留在组件内</li></ul></li></ol><h2 id="_10-从-java-迁移到-react-的心智路线" tabindex="-1"><a class="header-anchor" href="#_10-从-java-迁移到-react-的心智路线"><span>10. 从 Java 迁移到 React 的心智路线</span></a></h2><p>你可以把前端理解为一个“持续运行的客户端应用”，<br> 不同点在于：<strong>后端以“请求”为中心，前端以“状态”为中心</strong></p><h3 id="_10-1-java-与-react-typescript-对照表" tabindex="-1"><a class="header-anchor" href="#_10-1-java-与-react-typescript-对照表"><span>10.1 Java 与 React/TypeScript 对照表</span></a></h3><table><thead><tr><th>Java 后端概念</th><th>React/TypeScript 概念</th><th>说明</th></tr></thead><tbody><tr><td>控制器（Controller）</td><td>页面/组件（Page/Component）</td><td>页面入口负责组织 UI 与数据流</td></tr><tr><td>服务层（Service）</td><td>Hooks（钩子） + 业务组件</td><td>业务逻辑更贴近组件与状态</td></tr><tr><td>DTO（数据传输对象）</td><td>interface / type（类型定义）</td><td>强类型定义数据形状</td></tr><tr><td>过滤器/拦截器（Filter/Interceptor）</td><td>Axios 拦截器</td><td>统一认证、错误处理、日志</td></tr><tr><td>配置文件（application.yml）</td><td>window 运行期配置</td><td>环境配置与代码解耦</td></tr></tbody></table><h3 id="_10-2-dashboardindex-的数据流小图" tabindex="-1"><a class="header-anchor" href="#_10-2-dashboardindex-的数据流小图"><span>10.2 DashboardIndex 的数据流小图</span></a></h3><p>下面用 Mermaid（图表语法）快速画出 DashboardIndex 的关键数据流：</p><div class="language-mermaid line-numbers-mode" data-ext="mermaid" data-title="mermaid"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span>flowchart</span><span class="space"> </span><span>LR</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>A[&quot;currentArea</span><span class="space"> </span><span>变化&quot;]</span><span class="space"> </span><span>--&gt;</span><span class="space"> </span><span>B[&quot;useEffect</span><span class="space"> </span><span>请求</span><span class="space"> </span><span>getTodayReportCountApi&quot;]</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>B</span><span class="space"> </span><span>--&gt;</span><span class="space"> </span><span>C[&quot;dispatch</span><span class="space"> </span><span>setTodayReportCount&quot;]</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>C</span><span class="space"> </span><span>--&gt;</span><span class="space"> </span><span>D[&quot;store</span><span class="space"> </span><span>状态更新&quot;]</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span>D</span><span class="space"> </span><span>--&gt;</span><span class="space"> </span><span>E[&quot;DashboardIndex</span><span class="space"> </span><span>重新渲染&quot;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-结语" tabindex="-1"><a class="header-anchor" href="#_11-结语"><span>11. 结语</span></a></h2><p>TypeScript 和 React 在前端领域形成了一套和后端工程化相似的组织方式。<br> 当你把“分层、类型、拦截、数据流”这些后端经验迁移到前端时，你会发现两者的核心目标一致：<strong>可维护、可演进、可扩展</strong>。</p>`,74)])])}const r=a(e,[["render",l]]),i=JSON.parse(`{"path":"/article/gjl1230v/","title":"从 Java 视角去理解 TS 和 React","lang":"zh-CN","frontmatter":{"title":"从 Java 视角去理解 TS 和 React","createTime":"2026/02/04 14:22:40","permalink":"/article/gjl1230v/","description":"摘要：很多 Java 后端在接触前端时会困惑“React到底在干什么”“TypeScript（类型化 JavaScript）和 Java 类型到底像不像”。本文以项目中的 DashboardIndex 页面为主线，串起页面结构、状态管理、API（接口）封装与工程化配置，并用 Java 开发者熟悉的概念做对照，帮助你建立可迁移的前端心智模型。 1. 项目...","head":[["meta",{"property":"og:url","content":"https://callmeexiao.baby/article/gjl1230v/"}],["meta",{"property":"og:site_name","content":"Exiao's Blog"}],["meta",{"property":"og:title","content":"从 Java 视角去理解 TS 和 React"}],["meta",{"property":"og:description","content":"摘要：很多 Java 后端在接触前端时会困惑“React到底在干什么”“TypeScript（类型化 JavaScript）和 Java 类型到底像不像”。本文以项目中的 DashboardIndex 页面为主线，串起页面结构、状态管理、API（接口）封装与工程化配置，并用 Java 开发者熟悉的概念做对照，帮助你建立可迁移的前端心智模型。 1. 项目..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-04T08:30:30.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-04T08:30:30.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"从 Java 视角去理解 TS 和 React\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2026-02-04T08:30:30.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":6.3,"words":1890},"git":{"updatedTime":1770193830000,"contributors":[{"name":"金逸霄","username":"金逸霄","email":"yixiaojin@ptkj.net","commits":1,"avatar":"https://avatars.githubusercontent.com/金逸霄?v=4","url":"https://github.com/金逸霄"}]},"autoDesc":true,"filePathRelative":"前端技术/从Java视角去理解TS和React.md","categoryList":[{"id":"40d75c","sort":10003,"name":"前端技术"}]}`);export{r as comp,i as data};
